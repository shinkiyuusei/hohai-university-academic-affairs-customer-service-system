import{_ as k}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                   */import{p as N,d as R,r as p,s as U,as as Y,l as i,f as t,g as l,m as G,w as _,A,I as h,at as E,z as y,n as P,o as d,B as g,F as I,N as K,P as M,au as V,M as X,af as F}from"./index-CK_LbvG7.js";import{L as m,i as S}from"./index-8VjjxCB0.js";const q=()=>N.get("/api/admin/dashboard"),H={class:"dashboard"},j={class:"dashboard-header"},J={class:"page-title"},Q={class:"stats-grid"},Z={class:"stat-card"},$={class:"stat-icon users"},tt={class:"stat-content"},ot={class:"stat-value"},et={class:"stat-card"},st={class:"stat-icon documents"},at={class:"stat-content"},rt={class:"stat-value"},lt={class:"stat-card"},it={class:"stat-icon graph"},dt={class:"stat-content"},nt={class:"stat-value"},ct={class:"stat-card"},ft={class:"stat-icon conversations"},ht={class:"stat-content"},ut={class:"stat-value"},bt={class:"stat-card"},vt={class:"stat-icon diseases"},pt={class:"stat-content"},_t={class:"stat-value"},gt={class:"charts-grid"},wt={class:"chart-card"},yt={class:"chart-content"},mt={class:"chart-card"},Ct={class:"chart-content"},St={class:"chart-card chart-card-full"},xt={class:"chart-content"},Tt=R({__name:"Dashboard",setup(zt){const b=p({totalUsers:0,totalDocuments:0,totalGraphNodes:0,totalConversations:0,totalDiseases:0}),e=p({stats:!1,documentTypeChart:!1,userTrendChart:!1,conversationTrendChart:!1}),x=p(),T=p(),z=p();let n=null,c=null,f=null;const u=p(null),C=async()=>{try{e.value.stats=!0;const s=await q();u.value=s,b.value=s.stats}catch(s){console.error("获取统计数据失败:",s),P.error("获取统计数据失败")}finally{e.value.stats=!1}},W=async()=>{var s;try{e.value.documentTypeChart=!0,u.value||await C();const o=((s=u.value)==null?void 0:s.documentTypeStats.map(w=>{var v;return{value:w.count,name:((v=w.file_type)==null?void 0:v.toUpperCase())||"UNKNOWN"}}))||[],r={PDF:{start:"#fecaca",middle:"#fca5a5",end:"#f87171"},DOCX:{start:"#a5f3fc",middle:"#67e8f9",end:"#22d3ee"},DOC:{start:"#ddd6fe",middle:"#c4b5fd",end:"#a78bfa"},TXT:{start:"#bbf7d0",middle:"#86efac",end:"#4ade80"},UNKNOWN:{start:"#e2e8f0",middle:"#cbd5e1",end:"#94a3b8"}},a={backgroundColor:"transparent",tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}件 ({d}%)",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:1,textStyle:{color:"#334155",fontSize:13,fontWeight:500},shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.1)"},legend:{orient:"horizontal",bottom:"8%",left:"center",textStyle:{color:"#64748b",fontSize:13,fontWeight:500},itemGap:20,icon:"circle",itemWidth:12,itemHeight:12},series:[{name:"文档类型",type:"pie",radius:["38%","68%"],center:["50%","40%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:12,shadowBlur:22,shadowColor:"rgba(0, 0, 0, 0.12)",shadowOffsetY:5},label:{show:!0,position:"outside",formatter:`{b}
{c}件`,fontSize:12,fontWeight:600,color:"#475569",distance:12},emphasis:{label:{show:!0,fontSize:14,fontWeight:700,color:"#1e293b"},itemStyle:{shadowBlur:30,shadowOffsetX:0,shadowOffsetY:8,shadowColor:"rgba(0, 0, 0, 0.18)"},scale:!0,scaleSize:10},labelLine:{show:!0,lineStyle:{color:"#cbd5e1",width:2},length:18,length2:12},data:o.map(w=>{const v=r[w.name]||r.UNKNOWN;return{...w,itemStyle:{color:new m(0,0,1,1,[{offset:0,color:v.start},{offset:.5,color:v.middle},{offset:1,color:v.end}]),borderRadius:12,shadowBlur:22,shadowColor:"rgba(0, 0, 0, 0.12)",shadowOffsetY:5}}})}]};n=S(x.value),n.setOption(a)}catch(o){console.error("初始化文档类型分布图表失败:",o)}finally{e.value.documentTypeChart=!1}},D=async()=>{var s;try{e.value.userTrendChart=!0,u.value||await C();const{months:o,counts:r}=((s=u.value)==null?void 0:s.userTrendData)||{months:[],counts:[]},a={backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#cbd5e1",width:1,type:"dashed"}},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:1,textStyle:{color:"#334155",fontSize:13,fontWeight:500},shadowBlur:15,shadowColor:"rgba(0, 0, 0, 0.1)",padding:[12,16]},grid:{left:"5%",right:"5%",bottom:"10%",top:"8%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:o,axisLine:{lineStyle:{color:"#e2e8f0",width:2}},axisTick:{show:!1},axisLabel:{color:"#64748b",fontSize:12,fontWeight:500,margin:12}},yAxis:{type:"value",splitLine:{lineStyle:{color:"#f1f5f9",width:1,type:"dashed"}},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#64748b",fontSize:12,fontWeight:500}},series:[{name:"新增用户数",type:"line",smooth:!0,symbol:"circle",symbolSize:8,lineStyle:{width:4,color:new m(0,0,1,0,[{offset:0,color:"#95de64"},{offset:1,color:"#52c41a"}]),shadowBlur:10,shadowColor:"rgba(82, 196, 26, 0.3)",shadowOffsetY:3},itemStyle:{color:"#fff",borderColor:"#52c41a",borderWidth:3,shadowBlur:8,shadowColor:"rgba(82, 196, 26, 0.4)"},areaStyle:{opacity:.5,color:new m(0,0,0,1,[{offset:0,color:"rgba(149, 222, 100, 0.6)"},{offset:.7,color:"rgba(82, 196, 26, 0.3)"},{offset:1,color:"rgba(82, 196, 26, 0.1)"}]),shadowBlur:20,shadowColor:"rgba(82, 196, 26, 0.1)",shadowOffsetY:10},emphasis:{focus:"series",itemStyle:{color:"#fff",borderColor:"#73d13d",borderWidth:4,shadowBlur:15,shadowColor:"rgba(115, 209, 61, 0.6)"},lineStyle:{width:5,shadowBlur:15,shadowColor:"rgba(82, 196, 26, 0.5)"}},data:r}]};c=S(T.value),c.setOption(a)}catch(o){console.error("初始化用户趋势图表失败:",o)}finally{e.value.userTrendChart=!1}},L=async()=>{var s;try{e.value.conversationTrendChart=!0,u.value||await C();const{months:o,counts:r}=((s=u.value)==null?void 0:s.conversationTrendData)||{months:[],counts:[]},a={backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#cbd5e1",width:1,type:"dashed"}},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:1,textStyle:{color:"#334155",fontSize:13,fontWeight:500},shadowBlur:15,shadowColor:"rgba(0, 0, 0, 0.1)",padding:[12,16]},grid:{left:"5%",right:"5%",bottom:"10%",top:"8%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:o,axisLine:{lineStyle:{color:"#e2e8f0",width:2}},axisTick:{show:!1},axisLabel:{color:"#64748b",fontSize:12,fontWeight:500,margin:12}},yAxis:{type:"value",splitLine:{lineStyle:{color:"#f1f5f9",width:1,type:"dashed"}},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#64748b",fontSize:12,fontWeight:500}},series:[{name:"新增会话数",type:"line",smooth:!0,symbol:"circle",symbolSize:8,lineStyle:{width:4,color:new m(0,0,1,0,[{offset:0,color:"#b7eb8f"},{offset:1,color:"#73d13d"}]),shadowBlur:10,shadowColor:"rgba(115, 209, 61, 0.3)",shadowOffsetY:3},itemStyle:{color:"#fff",borderColor:"#73d13d",borderWidth:3,shadowBlur:8,shadowColor:"rgba(115, 209, 61, 0.4)"},areaStyle:{opacity:.5,color:new m(0,0,0,1,[{offset:0,color:"rgba(183, 235, 143, 0.6)"},{offset:.7,color:"rgba(115, 209, 61, 0.3)"},{offset:1,color:"rgba(115, 209, 61, 0.1)"}]),shadowBlur:20,shadowColor:"rgba(115, 209, 61, 0.1)",shadowOffsetY:10},emphasis:{focus:"series",itemStyle:{color:"#fff",borderColor:"#95de64",borderWidth:4,shadowBlur:15,shadowColor:"rgba(149, 222, 100, 0.6)"},lineStyle:{width:5,shadowBlur:15,shadowColor:"rgba(115, 209, 61, 0.5)"}},data:r}]};f=S(z.value),f.setOption(a)}catch(o){console.error("初始化问答会话趋势图表失败:",o)}finally{e.value.conversationTrendChart=!1}},B=()=>{n==null||n.resize(),c==null||c.resize(),f==null||f.resize()},O=async()=>{await C(),await Promise.all([W(),D(),L()])};return U(()=>{O(),window.addEventListener("resize",B)}),Y(()=>{window.removeEventListener("resize",B),n==null||n.dispose(),c==null||c.dispose(),f==null||f.dispose()}),(s,o)=>{const r=A,a=E;return d(),i("div",H,[t("div",j,[t("h1",J,[l(r,{class:"title-icon"},{default:_(()=>[l(g(I))]),_:1}),o[0]||(o[0]=G(" 系统控制台 ",-1))]),o[1]||(o[1]=t("p",{class:"page-subtitle"},"实时监控系统运行状态和数据统计",-1))]),t("div",Q,[h((d(),i("div",Z,[t("div",$,[l(r,null,{default:_(()=>[l(g(K))]),_:1})]),t("div",tt,[t("div",ot,y(b.value.totalUsers),1),o[2]||(o[2]=t("div",{class:"stat-label"},"用户总数",-1))])])),[[a,e.value.stats]]),h((d(),i("div",et,[t("div",st,[l(r,null,{default:_(()=>[l(g(M))]),_:1})]),t("div",at,[t("div",rt,y(b.value.totalDocuments),1),o[3]||(o[3]=t("div",{class:"stat-label"},"文档总数",-1))])])),[[a,e.value.stats]]),h((d(),i("div",lt,[t("div",it,[l(r,null,{default:_(()=>[l(g(V))]),_:1})]),t("div",dt,[t("div",nt,y(b.value.totalGraphNodes),1),o[4]||(o[4]=t("div",{class:"stat-label"},"图谱节点",-1))])])),[[a,e.value.stats]]),h((d(),i("div",ct,[t("div",ft,[l(r,null,{default:_(()=>[l(g(X))]),_:1})]),t("div",ht,[t("div",ut,y(b.value.totalConversations),1),o[5]||(o[5]=t("div",{class:"stat-label"},"问答会话",-1))])])),[[a,e.value.stats]]),h((d(),i("div",bt,[t("div",vt,[l(r,null,{default:_(()=>[l(g(F))]),_:1})]),t("div",pt,[t("div",_t,y(b.value.totalDiseases),1),o[6]||(o[6]=t("div",{class:"stat-label"},"文档总数",-1))])])),[[a,e.value.stats]])]),t("div",gt,[t("div",wt,[o[7]||(o[7]=t("div",{class:"chart-header"},[t("h3",null,"文档类型分布")],-1)),h((d(),i("div",yt,[t("div",{ref_key:"documentTypeChartRef",ref:x,class:"chart-container"},null,512)])),[[a,e.value.documentTypeChart]])]),t("div",mt,[o[8]||(o[8]=t("div",{class:"chart-header"},[t("h3",null,"用户注册趋势")],-1)),h((d(),i("div",Ct,[t("div",{ref_key:"userTrendChartRef",ref:T,class:"chart-container"},null,512)])),[[a,e.value.userTrendChart]])]),t("div",St,[o[9]||(o[9]=t("div",{class:"chart-header"},[t("h3",null,"问答会话创建趋势")],-1)),h((d(),i("div",xt,[t("div",{ref_key:"conversationTrendChartRef",ref:z,class:"chart-container"},null,512)])),[[a,e.value.conversationTrendChart]])])])])}}}),Ot=k(Tt,[["__scopeId","data-v-ff053d4c"]]);export{Ot as default};
