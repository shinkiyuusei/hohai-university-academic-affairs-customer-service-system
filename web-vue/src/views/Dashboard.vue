<!-- MD5: auto_generated -->
<!-- ä»ªè¡¨ç›˜é¡µé¢ -->

<template>
  <div class="dashboard">
    <!-- æ¬¢è¿åŒºåŸŸ -->
    <div class="welcome-section">
      <div class="welcome-content">
        <div class="welcome-text">
          <h1 class="welcome-title">
            <img src="@/assets/images/logo.png" alt="Logo" class="welcome-logo" />
            æ¬¢è¿ä½¿ç”¨æ•™åŠ¡ä¿¡æ¯çŸ¥è¯†å›¾è°±ç³»ç»Ÿ
          </h1>
          <p class="welcome-subtitle">æ‚¨å¥½ï¼Œ{{ userInfo?.realName || userInfo?.username }}</p>
          <p class="welcome-description">
            ä¸“ä¸šçš„æ•™åŠ¡ä¿¡æ¯ç®¡ç†å¹³å°ï¼Œè‡´åŠ›äºé€šè¿‡å…ˆè¿›çš„GraphRAGæŠ€æœ¯æä¾›ç²¾å‡†çš„æ•™åŠ¡çŸ¥è¯†æ£€ç´¢ï¼Œ
            ç»“åˆçŸ¥è¯†å›¾è°±å’Œä¿¡æ¯æ–‡æ¡£ï¼Œä¸ºæ•™åŠ¡ç®¡ç†æä¾›ä¸“ä¸šçš„æŠ€æœ¯æ”¯æŒå’Œè§£å†³æ–¹æ¡ˆã€‚
          </p>
          <div class="welcome-stats">
            <div class="stat-item">
              <span class="stat-number">{{ todayDate }}</span>
              <span class="stat-label">ä»Šæ—¥æ—¥æœŸ</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">{{ isAdmin ? 'ç®¡ç†å‘˜' : 'ç”¨æˆ·' }}</span>
              <span class="stat-label">å½“å‰èº«ä»½</span>
            </div>
          </div>
        </div>
        <div class="welcome-illustration">
          <div class="illustration-circle">
            <div class="background-image"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- åŠŸèƒ½ä»‹ç» -->
    <div class="features-section">
      <div class="section-header">
        <h2>æ ¸å¿ƒåŠŸèƒ½</h2>
        <p>æ¢ç´¢æˆ‘ä»¬ä¸ºæ•™åŠ¡ä¿¡æ¯æ£€ç´¢æä¾›çš„ä¸“ä¸šæ™ºèƒ½å·¥å…·</p>
      </div>

      <div class="feature-cards" :class="{ 'two-cards': !isAdmin }">
        <div class="feature-card" @click="goToQA">
          <div class="card-icon qa-icon">
            <el-icon size="32"><ChatDotRound /></el-icon>
          </div>
          <h3>æ™ºèƒ½é—®ç­”</h3>
          <p>åŸºäºGraphRAGæŠ€æœ¯çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œå¿«é€Ÿæ£€ç´¢çŸ¥è¯†å›¾è°±å’Œæ•™åŠ¡æ–‡æ¡£ï¼Œä¸ºæ‚¨æä¾›ç²¾å‡†çš„æ•™åŠ¡ä¿¡æ¯å’Œé˜²æ²»æ–¹æ¡ˆã€‚</p>
          <div class="card-footer">
            <span class="action-text">å¼€å§‹å’¨è¯¢</span>
            <el-icon><ArrowRight /></el-icon>
          </div>
        </div>

        <div v-if="isAdmin" class="feature-card" @click="goToDocuments">
          <div class="card-icon doc-icon">
            <el-icon size="32"><Document /></el-icon>
          </div>
          <h3>æ–‡æ¡£ç®¡ç†</h3>
          <p>ç®¡ç†æ•™åŠ¡æ”¿ç­–ç›¸å…³æ–‡æ¡£ï¼Œæ”¯æŒæ–‡æ¡£ä¸Šä¼ ã€çŸ¥è¯†æå–ï¼Œå»ºç«‹å®Œæ•´çš„æ•™åŠ¡èµ„æ–™ä½“ç³»ï¼Œä¾¿äºçŸ¥è¯†ç§¯ç´¯å’ŒæŸ¥è¯¢ã€‚</p>
          <div class="card-footer">
            <span class="action-text">ç®¡ç†æ–‡æ¡£</span>
            <el-icon><ArrowRight /></el-icon>
          </div>
        </div>

        <div class="feature-card" @click="goToProfile">
          <div class="card-icon profile-icon">
            <el-icon size="32"><Setting /></el-icon>
          </div>
          <h3>ä¸ªäººä¸­å¿ƒ</h3>
          <p>ç®¡ç†ä¸ªäººä¿¡æ¯ã€è´¦æˆ·è®¾ç½®ï¼ŒæŸ¥çœ‹ä½¿ç”¨è®°å½•ï¼Œä¸ªæ€§åŒ–å®šåˆ¶æ‚¨çš„ä½¿ç”¨ä½“éªŒï¼Œè®©ç³»ç»Ÿæ›´å¥½åœ°ä¸ºæ‚¨æœåŠ¡ã€‚</p>
          <div class="card-footer">
            <span class="action-text">è¿›å…¥è®¾ç½®</span>
            <el-icon><ArrowRight /></el-icon>
          </div>
        </div>
      </div>
    </div>

    <!-- ç³»ç»Ÿä¼˜åŠ¿ -->
    <div class="advantages-section">
      <div class="section-header">
        <h2>ç³»ç»Ÿä¼˜åŠ¿</h2>
        <p>ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬çš„ä¸“ä¸šå¹³å°</p>
      </div>

      <div class="advantages-grid">
        <div class="advantage-item">
          <div class="advantage-icon">
            <div class="icon-bg ai-bg">ğŸ¤–</div>
          </div>
          <h4>AIæ™ºèƒ½æ£€ç´¢</h4>
          <p>é‡‡ç”¨BGEå‘é‡æ¨¡å‹å’ŒFAISSæ£€ç´¢æŠ€æœ¯ï¼Œç¡®ä¿çŸ¥è¯†æ£€ç´¢çš„å‡†ç¡®æ€§å’Œé«˜æ•ˆæ€§</p>
        </div>

        <div class="advantage-item">
          <div class="advantage-icon">
            <div class="icon-bg case-bg">ğŸ“‹</div>
          </div>
          <h4>æ¡ˆä¾‹åº“æ”¯æŒ</h4>
          <p>æ•´åˆå†å²æ•™å­¦æ¡ˆä¾‹ï¼Œæä¾›å®é™…æ•™å­¦è¿›åº¦é¢„æ¡ˆï¼ŒåŠ å¿«æ•™åŠ¡æ•™å­¦çš„æ•ˆç‡</p>
        </div>

        <div class="advantage-item">
          <div class="advantage-icon">
            <div class="icon-bg professional-bg">ğŸŒ±</div>
          </div>
          <h4>ä¸“ä¸šå¯é </h4>
          <p>åŸºäºæ•™å­¦èƒŒæ™¯ï¼ŒåŸºäºçŸ¥è¯†å›¾è°±è¿›è¡Œæ™ºèƒ½é—®ç­”ï¼Œæä¾›ä¸“ä¸šã€å¯é ã€é«˜æ•ˆã€ç²¾å‡†çš„æ•™åŠ¡çŸ¥è¯†æ£€ç´¢</p>
        </div>

        <div class="advantage-item">
          <div class="advantage-icon">
            <div class="icon-bg easy-bg">âš¡</div>
          </div>
          <h4>å¿«é€Ÿå“åº”</h4>
          <p>ç§’çº§å“åº”æŸ¥è¯¢ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ï¼Œæé«˜ç»´ä¿®æ•ˆç‡å’Œè´¨é‡</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, computed } from 'vue'
import { useRouter } from 'vue-router'
import { useUserStore } from '@/stores/user'
import { ChatDotRound, Document, Setting, ArrowRight } from '@element-plus/icons-vue'

const router = useRouter()
const userStore = useUserStore()

// ç”¨æˆ·ä¿¡æ¯
const userInfo = computed(() => userStore.userInfo)

// æ˜¯å¦æ˜¯ç®¡ç†å‘˜
const isAdmin = computed(() => userStore.isAdmin())

// ä»Šæ—¥æ—¥æœŸ
const todayDate = new Date().toLocaleDateString('zh-CN', {
  month: '2-digit',
  day: '2-digit'
})

// è·³è½¬åˆ°æ™ºèƒ½é—®ç­”é¡µé¢
const goToQA = () => {
  router.push('/qa')
}

// è·³è½¬åˆ°æ–‡æ¡£ç®¡ç†é¡µé¢
const goToDocuments = () => {
  if (isAdmin.value) {
    router.push('/admin/documents')
  } else {
    router.push('/qa')
  }
}

// è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ
const goToProfile = () => {
  router.push('/profile')
}
</script>

<style scoped lang="scss">
.dashboard {
  min-height: 100vh;
  background: linear-gradient(135deg, #f8fafc 0%, #ffffff 50%, #f1f5f9 100%);
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      radial-gradient(circle at 10% 20%, rgba(82, 196, 26, 0.03) 0%, transparent 50%),
      radial-gradient(circle at 90% 80%, rgba(82, 196, 26, 0.04) 0%, transparent 50%);
    pointer-events: none;
  }
}

// æ¬¢è¿åŒºåŸŸ
.welcome-section {
  padding: 48px 0 64px;
  position: relative;
  z-index: 1;

  .welcome-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px;
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 48px;
    align-items: center;
  }

  .welcome-text {
    .welcome-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #1e293b;
      margin: 0 0 16px 0;
      display: flex;
      align-items: center;
      gap: 16px;

      .welcome-logo {
        width: 48px;
        height: 48px;
        border-radius: 12px;
      }
    }

    .welcome-subtitle {
      font-size: 1.25rem;
      color: var(--primary-color);
      margin: 0 0 20px 0;
      font-weight: 500;
    }

    .welcome-description {
      font-size: 1.1rem;
      color: #64748b;
      line-height: 1.7;
      margin: 0 0 32px 0;
      max-width: 600px;
    }

    .welcome-stats {
      display: flex;
      gap: 32px;

      .stat-item {
        text-align: center;

        .stat-number {
          display: block;
          font-size: 1.5rem;
          font-weight: 700;
          color: #1e293b;
          margin-bottom: 4px;
        }

        .stat-label {
          font-size: 0.875rem;
          color: #64748b;
          font-weight: 500;
        }
      }
    }
  }

  .welcome-illustration {
    display: flex;
    justify-content: center;
    align-items: center;

    .illustration-circle {
      width: 240px;
      height: 240px;
      border-radius: 50%;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
      position: relative;
      overflow: hidden;
      border: 3px solid #ffffff;

      .background-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('@/assets/images/login-bg.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }
    }
  }
}

// åŠŸèƒ½ä»‹ç»åŒºåŸŸ
.features-section {
  padding: 64px 0;
  position: relative;
  z-index: 1;

  .section-header {
    text-align: center;
    max-width: 600px;
    margin: 0 auto 48px;
    padding: 0 24px;

    h2 {
      font-size: 2.25rem;
      font-weight: 700;
      color: #1e293b;
      margin: 0 0 16px 0;
    }

    p {
      font-size: 1.125rem;
      color: #64748b;
      margin: 0;
      line-height: 1.6;
    }
  }

  .feature-cards {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 24px;

    &.two-cards {
      max-width: 800px;
    }
  }

  .feature-card {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid #e2e8f0;
    border-radius: 16px;
    padding: 32px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-primary);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    &:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
      border-color: #cbd5e1;

      &::before {
        transform: scaleX(1);
      }

      .card-icon {
        transform: scale(1.1);
      }
    }

    .card-icon {
      width: 64px;
      height: 64px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      transition: transform 0.3s ease;

      &.qa-icon {
        background: var(--gradient-primary);
        color: white;
      }

      &.doc-icon {
        background: linear-gradient(135deg, #52c41a, #389e0d);
        color: white;
      }

      &.profile-icon {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
      }
    }

    h3 {
      font-size: 1.25rem;
      font-weight: 600;
      color: #1e293b;
      margin: 0 0 12px 0;
    }

    p {
      color: #64748b;
      line-height: 1.6;
      margin: 0 0 24px 0;
      font-size: 0.95rem;
    }

    .card-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: var(--primary-color);
      font-weight: 500;
      font-size: 0.9rem;

      .action-text {
        margin-right: 8px;
      }
    }
  }
}

// ç³»ç»Ÿä¼˜åŠ¿åŒºåŸŸ
.advantages-section {
  padding: 64px 0;
  background: rgba(255, 255, 255, 0.5);
  position: relative;
  z-index: 1;

  .section-header {
    text-align: center;
    max-width: 600px;
    margin: 0 auto 48px;
    padding: 0 24px;

    h2 {
      font-size: 2.25rem;
      font-weight: 700;
      color: #1e293b;
      margin: 0 0 16px 0;
    }

    p {
      font-size: 1.125rem;
      color: #64748b;
      margin: 0;
      line-height: 1.6;
    }
  }

  .advantages-grid {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 24px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 32px;
  }

  .advantage-item {
    text-align: center;

    .advantage-icon {
      margin-bottom: 20px;

      .icon-bg {
        width: 80px;
        height: 80px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        margin: 0 auto;

        &.ai-bg {
          background: var(--gradient-primary);
        }

        &.case-bg {
          background: linear-gradient(135deg, #52c41a, #389e0d);
        }

        &.professional-bg {
          background: linear-gradient(135deg, #73d13d, #52c41a);
        }

        &.easy-bg {
          background: linear-gradient(135deg, #f59e0b, #d97706);
        }
      }
    }

    h4 {
      font-size: 1.125rem;
      font-weight: 600;
      color: #1e293b;
      margin: 0 0 12px 0;
    }

    p {
      color: #64748b;
      line-height: 1.6;
      margin: 0;
      font-size: 0.95rem;
    }
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 1024px) {
  .welcome-section .welcome-content {
    grid-template-columns: 1fr;
    text-align: center;
    gap: 32px;
  }

  .welcome-section .welcome-title {
    font-size: 2rem;
  }

  .features-section .feature-cards {
    grid-template-columns: 1fr;
    max-width: 500px;
  }

  .advantages-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .welcome-section .welcome-title {
    font-size: 1.75rem;
    flex-direction: column;
    gap: 12px;
  }

  .welcome-section .welcome-stats {
    justify-content: center;
  }

  .advantages-grid {
    grid-template-columns: 1fr;
  }

  .section-header h2 {
    font-size: 1.75rem;
  }
}
</style>
